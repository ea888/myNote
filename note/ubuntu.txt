How to install nvidia cuda and cuNN on ubuntu

Download run files of Nvidia driver and Cuda

sudo apt-get install build-essential
Create file: /etc/modprobe.d/blacklist-nouveau.conf
blacklist nouveau
blacklist lbm-nouveau
options nouveau modset=0
alias nouveau off
alias lbm-nouveau off
Create file: /etc/modprobe.d/nouveau-kms.conf
options nouveau modset=0

sudo update-initramfs -u

Reboot computer
Ctrl + Alt + F1, and login to your user.
sudo service lightdm stop
Cd ${Your Nvidia driver folder}
sudo bash NVIDIA-Linux-x86_64-375.66.run --no-opengl-files
Run step by step and GENERATE a signing key! In my case, it stores at /usr/share/nvidia/xxxxx.der

sudo mokutil --disable-validation
Then reboot, this command will show mok management after reboot, we can simply disable Secure boot or enroll a .der key generated by Nvidia driver above, /usr/share/nvidia (If you cannot find the folder in Mok managemant, copy it to somewhere you can browse in the MOK management->enroll key menu)

sudo bash cuda-7.0.28_linux.run --override --no-opengl-libs
During the install:
Accept EULA conditions
Say NO to installing the NVIDIA driver
Say NO rebuilding any Xserver configurations with Nvidia.
SAY YES to installing CUDA Toolkit + Driver
Say YES to installing CUDA Samples

sudo modprobe nvidia
Verify the driver version:
cat /proc/driver/nvidia/version





Create CUDA Samples.
Go to your NVIDIA_CUDA-7.5_Samples folder and type $make.

Go to NVIDIA_CUDA-7.5_Samples/bin/x86_64/linux/release/ for the demos, and do the two standard checks:
./deviceQuery
to see your graphics card specs and
./bandwidthTest
to check if its operating correctly.
Both tests should ultimately output a 'PASS' in your terminal.

Optional:
Set Environment path variables:
$ export PATH=/usr/local/cuda-7.0/bin:$PATH
$ export LD_LIBRARY_PATH=/usr/local/cuda-7.0/lib64:$LD_LIBRARY_PATH

*Change depending on your cuda version.

Check CUDA driver version:
$ nvcc -V



Install cNN

CUDNN_URL="http://developer.download.nvidia.com/compute/redist/cudnn/v5.1/cudnn-8.0-linux-x64-v5.1.tgz"
wget ${CUDNN_URL}
sudo tar -xzf cudnn-8.0-linux-x64-v5.1.tgz -C /usr/local
rm cudnn-8.0-linux-x64-v5.1.tgz && sudo ldconfig

This is very important, if the tensorflow shows any error: ImportError: libcusolver.so.8.0: cannot open shared object file, run this first:
sudo ldconfig /usr/local/cuda-8.0/lib64


Install Oracle java8

sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java8-installer


